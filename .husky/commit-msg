COMMIT_MSG_FILE=$1
RESULT=0

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ” ì»¤ë°‹ ë©”ì‹œì§€ ê²€ì‚¬ ì‹œì‘"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# ì»¤ë°‹ ë©”ì‹œì§€ ë‚´ìš© í‘œì‹œ (ìƒ‰ìƒ ê°•ì¡°)
echo ""
echo "ğŸ“ ì»¤ë°‹ ë©”ì‹œì§€:"
echo "\033[1;34m$(cat "$COMMIT_MSG_FILE")\033[0m"
echo ""

# commitlint ì‹¤í–‰ (pnpm ì‚¬ìš©)
if command -v pnpm >/dev/null 2>&1; then
  pnpm exec commitlint --edit "$COMMIT_MSG_FILE"
else
  npx --no -- commitlint --edit "$COMMIT_MSG_FILE"
fi

RESULT=$?

if [ $RESULT -eq 0 ]; then
  echo "\033[1;32mâœ… ì»¤ë°‹ ë©”ì‹œì§€ê°€ ê·œì¹™ì— ë§ìŠµë‹ˆë‹¤!\033[0m"
else
  echo "\033[1;31mâŒ ì»¤ë°‹ ë©”ì‹œì§€ê°€ ê·œì¹™ì— ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.\033[0m"
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo "ğŸ’¡ í˜•ì‹ ì˜ˆì‹œ: \033[1;33mfeat(ui): ë¡œê·¸ì¸ ë²„íŠ¼ ì¶”ê°€\033[0m"
  echo "ğŸš¨ ì‚¬ìš© ê°€ëŠ¥í•œ íƒ€ì…:"
  echo "\033[1;36mfeat, fix, docs, style, refactor, perf, test, build, ci, chore, revert\033[0m"
  echo ""
  echo "ğŸ”‘ ì‚¬ìš© ê°€ëŠ¥í•œ ë²”ìœ„:"
  echo "\033[1;36msetup, bug, ui, page, components, hooks, lib, docs, api, styles, config, deps, auth, db, middleware, layout, route, public, feature, store, test, ci, other\033[0m"
  echo ""
  echo "â— ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ìˆ˜ì •í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”."
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
fi

exit $RESULT